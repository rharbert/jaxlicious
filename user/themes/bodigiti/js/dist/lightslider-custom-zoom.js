jQuery(function(e){var t,n,o,i="800px",a="800px";window.imagezoom=(t={zoom:.95,maxZoomCount:2,touchSliderOffset:170,doubleClickDelta:300},n=document.createElement("canvas"),o=function(o,r){if(o&&o.nodeName&&"IMG"===o.nodeName){var d,u,c,s,l,m,f,g,h,p,v,E,y={},w=!1,L=0,b=0;r=r||{},Object.keys(t).forEach(function(e){y[e]=void 0!==r[e]?r[e]:t[e]}),o.complete&&P(),o.addEventListener("load",P)}function x(){l>0?l=0:l<d-c&&(l=d-c),m>0?m=0:m<u-s&&(m=u-s),o.style.backgroundSize=c+"px "+s+"px",o.style.backgroundPosition=l+"px "+m+"px"}function _(){c=d,s=u,l=m=0,x(),L=0}function z(e){if(!0!==w){e.preventDefault();var t=o.getBoundingClientRect(),n=e.pageX-t.left-window.pageXOffset,i=e.pageY-t.top-window.pageYOffset,a=(n-l)/c,r=(i-m)/s;c+=c*y.zoom,s+=s*y.zoom,l=n-c*a,m=i-s*r,c<=d||s<=u||L>=y.maxZoomCount?_():(x(),L++)}else w=!1}function S(e){!0!==w?(e.preventDefault(),_()):w=!1}function D(e){L>0&&(w=!0,e.preventDefault(),l+=e.pageX-f.pageX,m+=e.pageY-f.pageY,f=e,x())}function C(){document.removeEventListener("mouseup",C),document.removeEventListener("mousemove",D)}function T(e){e.preventDefault(),f=e,document.addEventListener("mousemove",D),document.addEventListener("mouseup",C)}function k(e){if(L>0&&e.preventDefault(),1==e.targetTouches.length){var t=e.targetTouches[0],n=t.clientX-h.x,o=t.clientY-h.y;l=p+n,m=v+o,f=e,x()}}function I(){o.removeEventListener("touchmove",k),o.removeEventListener("touchend",I)}function X(e){f=e,p=l,v=m,h={x:e.touches[0].clientX,y:e.touches[0].clientY},o.addEventListener("touchmove",k,!1),o.addEventListener("touchend",I)}function O(e){E={x:e.touches[0].clientX,y:e.touches[0].clientY},o.addEventListener("touchmove",j,!1),o.addEventListener("touchend",Y)}function Y(){o.removeEventListener("touchmove",j),o.removeEventListener("touchend",Y)}function j(t){if(1==t.targetTouches.length){var n=e(t.target),o=t.targetTouches[0].clientX-E.x;Math.abs(o)>y.touchSliderOffset&&(o<-Math.abs(y.touchSliderOffset)?n.hasClass("main-slider-item")&&"object"==typeof product_detail_slider.main?product_detail_slider.main.goToNextSlide():n.hasClass("large-slider-item")&&"object"==typeof product_detail_slider.largesize&&product_detail_slider.largesize.goToNextSlide():o>y.touchSliderOffset&&(n.hasClass("main-slider-item")&&"object"==typeof product_detail_slider.main?product_detail_slider.main.goToPrevSlide():n.hasClass("large-slider-item")&&"object"==typeof product_detail_slider.largesize&&product_detail_slider.largesize.goToPrevSlide()),t.preventDefault())}}function M(e){"boolean"==typeof bIsMobile&&!0===bIsMobile?0===b?(z(e),b=(new Date).getTime()):(new Date).getTime()-b<y.doubleClickDelta?(S(e),b=0):(z(e),b=(new Date).getTime()):z(e)}function N(e){var t=window.getComputedStyle(o,null);"auto"!==t.width&&"100%"!==t.width?(i=t.width,d=parseInt(t.width,10)):d=parseInt(i,10),"auto"!==t.height&&"100%"!==t.height?(a=t.height,u=parseInt(t.height,10)):u=parseInt(a,10),c=d,s=u,l=0,m=0,!0===e&&function(e){e.style.backgroundImage='url("'+e.src+'")',e.style.backgroundRepeat="no-repeat",n.width=e.naturalWidth,n.height=e.naturalHeight,g=n.toDataURL(),e.src=g}(o),o.style.backgroundSize=d+"px "+u+"px",o.style.backgroundPosition="0 0"}function P(){o.src!==g&&(N(!0),o.addEventListener("imagezoom.reset",_),o.addEventListener("click",M),o.addEventListener("contextmenu",S),o.addEventListener("mousedown",T),o.addEventListener("touchstart",X),o.addEventListener("touchstart",O),window.addEventListener("resize",function(){N(!1),_()}))}},"function"!=typeof window.getComputedStyle?function(e){return e}:function(e,t){return e&&e.length?Array.prototype.forEach.call(e,o,t):e&&e.nodeName&&o(e,t),e}),e(function(){imagezoom(document.querySelectorAll("img.imagezoom"))})});