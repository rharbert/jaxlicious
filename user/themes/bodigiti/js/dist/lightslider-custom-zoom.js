jQuery(function(Y){var j,M,n,N="800px",P="800px";window.imagezoom=(j={zoom:.95,maxZoomCount:2,touchSliderOffset:170,doubleClickDelta:300},M=document.createElement("canvas"),n=function(r,t){if(r&&r.nodeName&&"IMG"===r.nodeName){var d,u,c,s,l,m,i,o,a,f,g,h,p={},v=!1,E=0,n=0;t=t||{},Object.keys(j).forEach(function(e){p[e]=void 0!==t[e]?t[e]:j[e]}),r.complete&&O(),r.addEventListener("load",O)}function y(){0<l?l=0:l<d-c&&(l=d-c),0<m?m=0:m<u-s&&(m=u-s),r.style.backgroundSize=c+"px "+s+"px",r.style.backgroundPosition=l+"px "+m+"px"}function w(){c=d,s=u,l=m=0,y(),E=0}function L(e){if(!0!==v){e.preventDefault();var t=r.getBoundingClientRect(),n=e.pageX-t.left-window.pageXOffset,o=e.pageY-t.top-window.pageYOffset,i=(n-l)/c,a=(o-m)/s;c+=c*p.zoom,s+=s*p.zoom,l=n-c*i,m=o-s*a,c<=d||s<=u||E>=p.maxZoomCount?w():(y(),E++)}else v=!1}function b(e){!0!==v?(e.preventDefault(),w()):v=!1}function x(e){0<E&&(v=!0,e.preventDefault(),l+=e.pageX-i.pageX,m+=e.pageY-i.pageY,i=e,y())}function _(){document.removeEventListener("mouseup",_),document.removeEventListener("mousemove",x)}function e(e){e.preventDefault(),i=e,document.addEventListener("mousemove",x),document.addEventListener("mouseup",_)}function z(e){if(0<E&&e.preventDefault(),1==e.targetTouches.length){var t=e.targetTouches[0],n=t.clientX-a.x,o=t.clientY-a.y;l=f+n,m=g+o,i=e,y()}}function S(){r.removeEventListener("touchmove",z),r.removeEventListener("touchend",S)}function D(e){f=l,g=m,a={x:(i=e).touches[0].clientX,y:e.touches[0].clientY},r.addEventListener("touchmove",z,!1),r.addEventListener("touchend",S)}function C(e){h={x:e.touches[0].clientX,y:e.touches[0].clientY},r.addEventListener("touchmove",k,!1),r.addEventListener("touchend",T)}function T(){r.removeEventListener("touchmove",k),r.removeEventListener("touchend",T)}function k(e){if(1==e.targetTouches.length){var t=Y(e.target),n=e.targetTouches[0].clientX-h.x;Math.abs(n)>p.touchSliderOffset&&(n<-Math.abs(p.touchSliderOffset)?t.hasClass("main-slider-item")&&"object"==typeof product_detail_slider.main?product_detail_slider.main.goToNextSlide():t.hasClass("large-slider-item")&&"object"==typeof product_detail_slider.largesize&&product_detail_slider.largesize.goToNextSlide():n>p.touchSliderOffset&&(t.hasClass("main-slider-item")&&"object"==typeof product_detail_slider.main?product_detail_slider.main.goToPrevSlide():t.hasClass("large-slider-item")&&"object"==typeof product_detail_slider.largesize&&product_detail_slider.largesize.goToPrevSlide()),e.preventDefault())}}function I(e){"boolean"==typeof bIsMobile&&!0===bIsMobile?n=0===n?(L(e),(new Date).getTime()):(new Date).getTime()-n<p.doubleClickDelta?(b(e),0):(L(e),(new Date).getTime()):L(e)}function X(e){var t,n=window.getComputedStyle(r,null);d="auto"!==n.width&&"100%"!==n.width?(N=n.width,parseInt(n.width,10)):parseInt(N,10),u="auto"!==n.height&&"100%"!==n.height?(P=n.height,parseInt(n.height,10)):parseInt(P,10),c=d,s=u,!(m=l=0)===e&&((t=r).style.backgroundImage='url("'+t.src+'")',t.style.backgroundRepeat="no-repeat",M.width=t.naturalWidth,M.height=t.naturalHeight,o=M.toDataURL(),t.src=o),r.style.backgroundSize=d+"px "+u+"px",r.style.backgroundPosition="0 0"}function O(){r.src!==o&&(X(!0),r.addEventListener("imagezoom.reset",w),r.addEventListener("click",I),r.addEventListener("contextmenu",b),r.addEventListener("mousedown",e),r.addEventListener("touchstart",D),r.addEventListener("touchstart",C),window.addEventListener("resize",function(){X(!1),w()}))}},"function"!=typeof window.getComputedStyle?function(e){return e}:function(e,t){return e&&e.length?Array.prototype.forEach.call(e,n,t):e&&e.nodeName&&n(e,t),e}),Y(function(){imagezoom(document.querySelectorAll("img.imagezoom"))})});